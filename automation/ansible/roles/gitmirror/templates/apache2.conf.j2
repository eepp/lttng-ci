<VirtualHost *:80>
  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  RedirectMatch ^/$ /cgit/
</VirtualHost>

{% if cgit_tls_key and cgit_tls_cert %}
<VirtualHost *:443>
  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html
  ErrorLog ${APACHE_LOG_DIR}/error.log
  CustomLog ${APACHE_LOG_DIR}/access.log combined

  SSLEngine on
  SSLCertificateFile {{cgit_tls_cert}}
  SSLCertificateKeyFile {{cgit_tls_key}}

  RedirectMatch ^/$ /cgit/

</VirtualHost>

{% endif %}